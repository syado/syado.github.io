<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADHD Champion Select - あなたのプレイスタイル診断</title>
    
    <!-- OGP (Open Graph Protocol) Tags -->
    <meta property="og:title" content="ADHD Champion Select - あなたのプレイスタイル診断" />
    <meta property="og:description" content="LoLプレイヤー向けのADHDスクリーニング診断。あなたのチャンピオンタイプを診断して、プレイスタイルを分析！" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://web.syado.net/diagnosis/adhd-lol-champion-select" />
    <meta property="og:image" content="https://web.syado.net/diagnosis/adhd-lol-champion-select/og-image.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="ADHD Champion Select" />
    <meta property="og:locale" content="ja_JP" />
    
    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="ADHD Champion Select - あなたのプレイスタイル診断" />
    <meta name="twitter:description" content="LoLプレイヤー向けのADHDスクリーニング診断。あなたのチャンピオンタイプを診断して、プレイスタイルを分析！" />
    <meta name="twitter:image" content="https://web.syado.net/diagnosis/adhd-lol-champion-select/og-image.png" />
    <meta name="twitter:site" content="@yourhandle" />
    
    <!-- General Meta Tags -->
    <meta name="description" content="LoLプレイヤー向けのADHDスクリーニング診断。ゲーム風UIで楽しく自己分析！" />
    <meta name="keywords" content="ADHD,診断,League of Legends,LoL,チャンピオン,プレイスタイル" />
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #0a1428 0%, #1e2328 50%, #0a1428 100%);
            min-height: 100vh;
            color: #f0e6d2;
            overflow-x: hidden;
        }

        .stars {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #c8aa6e;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            background: linear-gradient(135deg, #785a28 0%, #c8aa6e 50%, #785a28 100%);
            border: 2px solid #c8aa6e;
            padding: 30px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(200, 170, 110, 0.3);
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(255, 255, 255, 0.03) 10px,
                rgba(255, 255, 255, 0.03) 20px
            );
            animation: scan 20s linear infinite;
        }

        @keyframes scan {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50%, 50%); }
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .title {
            font-size: 2.5em;
            font-weight: 900;
            text-align: center;
            color: #0a1428;
            text-shadow: 2px 2px 0 rgba(200, 170, 110, 0.3);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .subtitle {
            text-align: center;
            font-size: 1.2em;
            color: #0a1428;
            font-weight: 700;
        }

        .level-display {
            text-align: center;
            margin: 20px 0;
        }

        .level-badge {
            display: inline-block;
            background: linear-gradient(135deg, #c8aa6e, #785a28);
            color: #0a1428;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.5em;
            font-weight: 900;
            border: 3px solid #785a28;
            box-shadow: 0 0 20px rgba(200, 170, 110, 0.5);
        }

        .xp-bar-container {
            background: #0a1428;
            height: 30px;
            border-radius: 15px;
            border: 2px solid #785a28;
            overflow: hidden;
            position: relative;
            margin: 20px 0;
        }

        .xp-bar {
            height: 100%;
            background: linear-gradient(90deg, #c8aa6e, #f0e6d2);
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(200, 170, 110, 0.8);
        }

        .xp-text {
            position: absolute;
            width: 100%;
            text-align: center;
            line-height: 30px;
            font-weight: 700;
            color: #f0e6d2;
            text-shadow: 1px 1px 2px #000;
        }

        .card {
            background: rgba(30, 35, 40, 0.95);
            border: 2px solid #785a28;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, #c8aa6e, transparent);
        }

        .section-title {
            font-size: 1.8em;
            font-weight: 900;
            color: #c8aa6e;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #c8aa6e, #785a28);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            box-shadow: 0 0 15px rgba(200, 170, 110, 0.5);
        }

        .question-card {
            background: rgba(10, 20, 40, 0.6);
            border: 2px solid #463714;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s;
            position: relative;
        }

        .question-card:hover {
            border-color: #785a28;
            box-shadow: 0 0 20px rgba(120, 90, 40, 0.3);
        }

        .question-number {
            position: absolute;
            top: -15px;
            left: 20px;
            background: linear-gradient(135deg, #c8aa6e, #785a28);
            color: #0a1428;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 900;
            font-size: 0.9em;
            border: 2px solid #785a28;
        }

        .question-text {
            margin-top: 10px;
            font-size: 1.1em;
            font-weight: 600;
            color: #f0e6d2;
            margin-bottom: 20px;
        }

        .lol-context {
            background: rgba(200, 170, 110, 0.1);
            border-left: 3px solid #c8aa6e;
            padding: 10px 15px;
            margin: 10px 0 15px 0;
            font-size: 0.95em;
            color: #c8aa6e;
            font-style: italic;
        }

        .options-grid {
            display: grid;
            gap: 10px;
        }

        .option-btn {
            background: rgba(30, 35, 40, 0.8);
            border: 2px solid #463714;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
            color: #a09b8c;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .option-btn:hover {
            background: rgba(120, 90, 40, 0.3);
            border-color: #785a28;
            color: #f0e6d2;
            transform: translateX(5px);
        }

        .option-btn.selected {
            background: rgba(200, 170, 110, 0.2);
            border-color: #c8aa6e;
            color: #f0e6d2;
            box-shadow: 0 0 15px rgba(200, 170, 110, 0.3);
        }

        .option-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, #785a28, #463714);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .btn {
            padding: 15px 40px;
            border: 2px solid #785a28;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #c8aa6e, #785a28);
            color: #0a1428;
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #f0e6d2, #c8aa6e);
            box-shadow: 0 0 20px rgba(200, 170, 110, 0.5);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: rgba(30, 35, 40, 0.8);
            color: #c8aa6e;
        }

        .btn-secondary:hover {
            background: rgba(120, 90, 40, 0.3);
            border-color: #c8aa6e;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-container {
            display: flex;
            gap: 20px;
            margin-top: 30px;
        }

        .btn-container .btn {
            flex: 1;
        }

        .share-buttons button {
            transition: all 0.3s ease;
        }

        .share-buttons button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(200, 170, 110, 0.4);
        }

        #shareTwitterBtn:hover {
            background: linear-gradient(135deg, #1DA1F2, #0d8bd9);
        }

        #shareTwitterImageBtn {
            background: linear-gradient(135deg, #1DA1F2, #0d95e8);
        }

        #shareTwitterImageBtn:hover {
            background: linear-gradient(135deg, #1589d4, #0a7bc4);
            box-shadow: 0 5px 25px rgba(29, 161, 242, 0.5);
        }

        #copyTextBtn:hover,
        #saveImageBtn:hover {
            background: rgba(200, 170, 110, 0.3);
        }

        .alert {
            background: rgba(139, 69, 19, 0.2);
            border: 2px solid #8b4513;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .alert-warning {
            border-color: #ff9800;
            background: rgba(255, 152, 0, 0.1);
        }

        .alert-danger {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.1);
        }

        .alert-info {
            border-color: #2196F3;
            background: rgba(33, 150, 243, 0.1);
        }

        .alert code {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .alert a {
            font-weight: 700;
            text-decoration: underline;
        }

        .alert h3 {
            color: #c8aa6e;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .champion-result {
            text-align: center;
            padding: 40px;
        }

        .champion-portrait {
            width: 200px;
            height: 200px;
            margin: 0 auto 30px;
            background: linear-gradient(135deg, #785a28, #c8aa6e);
            border-radius: 20px;
            border: 4px solid #c8aa6e;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5em;
            box-shadow: 0 0 40px rgba(200, 170, 110, 0.5);
            position: relative;
        }

        .champion-portrait::before {
            content: '';
            position: absolute;
            inset: -10px;
            border-radius: 25px;
            padding: 3px;
            background: linear-gradient(45deg, #c8aa6e, transparent, #c8aa6e);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: rotate 3s linear infinite;
        }

        @keyframes rotate {
            to { transform: rotate(360deg); }
        }

        .champion-name {
            font-size: 2.5em;
            font-weight: 900;
            color: #c8aa6e;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .champion-title {
            font-size: 1.2em;
            color: #a09b8c;
            margin-bottom: 30px;
            font-style: italic;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-box {
            background: rgba(10, 20, 40, 0.6);
            border: 2px solid #463714;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: 900;
            color: #c8aa6e;
            margin: 10px 0;
        }

        .stat-label {
            color: #a09b8c;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        .stat-bar {
            background: #0a1428;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .stat-fill {
            height: 100%;
            background: linear-gradient(90deg, #785a28, #c8aa6e);
            border-radius: 4px;
        }

        .abilities-section {
            background: rgba(10, 20, 40, 0.6);
            border: 2px solid #785a28;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
        }

        .ability {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            align-items: flex-start;
        }

        .ability-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #c8aa6e, #785a28);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: 900;
            color: #0a1428;
            border: 2px solid #c8aa6e;
            flex-shrink: 0;
        }

        .ability-content h4 {
            color: #c8aa6e;
            font-size: 1.2em;
            margin-bottom: 8px;
        }

        .ability-desc {
            color: #a09b8c;
            line-height: 1.6;
        }

        .rank-badge {
            display: inline-block;
            padding: 10px 30px;
            background: linear-gradient(135deg, #785a28, #c8aa6e);
            border: 3px solid #c8aa6e;
            border-radius: 10px;
            font-size: 1.8em;
            font-weight: 900;
            color: #0a1428;
            margin: 20px 0;
            box-shadow: 0 0 30px rgba(200, 170, 110, 0.5);
        }

        .tips-section {
            background: rgba(200, 170, 110, 0.1);
            border: 2px solid #785a28;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }

        .tips-section h3 {
            color: #c8aa6e;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .tip-item {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(10, 20, 40, 0.4);
            border-radius: 8px;
            border-left: 3px solid #c8aa6e;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: #c8aa6e;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .form-control {
            width: 100%;
            padding: 15px;
            background: rgba(10, 20, 40, 0.6);
            border: 2px solid #463714;
            border-radius: 8px;
            color: #f0e6d2;
            font-size: 1em;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .form-control:focus {
            outline: none;
            border-color: #c8aa6e;
            box-shadow: 0 0 15px rgba(200, 170, 110, 0.3);
        }

        @media (max-width: 768px) {
            .title {
                font-size: 1.8em;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .btn-container {
                flex-direction: column;
            }
        }

        .hidden {
            display: none;
        }

        .fade-in {
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="container">
        <div id="app"></div>
    </div>

    <script>
        // Create stars
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }

        const app = {
            currentSection: 'intro',
            answers: {},
            level: 1,
            xp: 0,
            maxXp: 100,

            // LoL風の質問
            sections: {
                inattention: {
                    title: 'マップ認識 & フォーカス',
                    icon: '🗺️',
                    questions: [
                        {
                            q: 'レーン戦中、ミニマップのチェックを忘れてガンクを食らうことが多い',
                            lol: 'ジャングラーの位置を見失い、気づいたら背後にいる...'
                        },
                        {
                            q: 'CS取りに集中しすぎて、チームファイトのピンを見逃す',
                            lol: 'ファームしてたら味方が4v5で戦ってた'
                        },
                        {
                            q: 'スキルの説明文を最後まで読めず、パッシブを理解してない',
                            lol: '「このチャンプこんなパッシブあったの！？」'
                        },
                        {
                            q: 'ドラゴンやバロンのタイマーを忘れて、敵に取られる',
                            lol: 'オブジェクトタイマー？そんなのあったっけ？'
                        },
                        {
                            q: 'アイテムビルドを途中で忘れて、変なものを買ってしまう',
                            lol: 'なんでADキャリーなのにAPアイテム買ったんだっけ...'
                        },
                        {
                            q: '敵のサモナースペルのクールダウンを追えない',
                            lol: 'フラッシュ使ったの5分前だっけ？10分前だっけ？'
                        },
                        {
                            q: '集団戦で誰を狙えばいいか分からなくなる',
                            lol: '気づいたらタンクを延々と殴っていた'
                        },
                        {
                            q: 'ワードを置く場所を考えず、適当なところに置いてしまう',
                            lol: 'ワード置いたけど何も見えない位置だった'
                        },
                        {
                            q: 'ゲーム中に別のことを考えて、デスする',
                            lol: '今日の夕飯何だっけ...って考えてたらキルされた'
                        }
                    ]
                },
                hyperactivity: {
                    title: 'アグレッシブプレイ & 衝動性',
                    icon: '⚔️',
                    questions: [
                        {
                            q: 'ファームが退屈で、常にキルを求めてロームしてしまう',
                            lol: 'CS 50でもキル10取ればいいでしょ（負ける）'
                        },
                        {
                            q: '相手が低HPだと、タワーダイブを我慢できない',
                            lol: '「いける！」→「？？？」（トレード1-1）'
                        },
                        {
                            q: 'ピンバックされても突っ込んでしまう',
                            lol: '味方「下がれ」俺「イケる」→ 灰色画面'
                        },
                        {
                            q: 'クールダウン中なのに戦闘を仕掛けてしまう',
                            lol: 'R使えないのに行っちゃった...'
                        },
                        {
                            q: '相手5人いても1人で突っ込んでしまう',
                            lol: 'ペンタキル取れると思った（取れない）'
                        },
                        {
                            q: 'フラッシュを温存できず、無駄に使ってしまう',
                            lol: 'クールタイムなし設定にしてほしい'
                        },
                        {
                            q: 'チャットで煽られると即座に反応してしまう',
                            lol: '「？」→「？？？？？」'
                        },
                        {
                            q: '負けそうでもサレンダー投票にNoを押してしまう',
                            lol: '逆転できる...できるはず...（できない）'
                        },
                        {
                            q: 'フィードしてる味方を見ると、突撃したくなる',
                            lol: '「俺がキャリーしなきゃ！」（フィード加速）'
                        }
                    ]
                },
                additional: {
                    title: '戦略 & マクロ管理',
                    icon: '🎯',
                    questions: [
                        {
                            q: 'ゲーム前に戦略を立てても、実行できない',
                            lol: 'パワースパイク意識するって決めたのに忘れた'
                        },
                        {
                            q: 'レーン優先順位がわからず、適当にプレイしてしまう',
                            lol: 'プッシュすべき？フリーズすべき？わからん'
                        },
                        {
                            q: 'バロンとドラゴンどっちを取るか決められない',
                            lol: '迷ってる間に敵が両方取った'
                        },
                        {
                            q: 'ゲームが長引くと集中力が切れる',
                            lol: '40分超えたら何もわからなくなる'
                        },
                        {
                            q: 'ランクゲームを延々とやってしまう（勝つまでやめられない）',
                            lol: '気づいたら10連敗してた'
                        },
                        {
                            q: '複数レーンの状況を把握できない',
                            lol: 'トップで戦ってる間に全レーン崩壊'
                        },
                        {
                            q: '負けると感情的になり、冷静な判断ができない',
                            lol: 'うおおおお！！リベンジマッチだ！（さらに負ける）'
                        },
                        {
                            q: 'アイテムを買うのを忘れて、1500Gため込む',
                            lol: '完成品買えるゴールド持ってレーン戻ってた'
                        },
                        {
                            q: '新チャンプが出ると、即座にランクで使いたくなる',
                            lol: '練習？いらない。俺は天才だ（0/10/0）'
                        },
                        {
                            q: 'メタが変わると、すぐに新しいビルドを試したくなる',
                            lol: '配信者が使ってたから真似したけど使えない'
                        }
                    ]
                },
                functional: {
                    title: '日常生活への影響',
                    icon: '🏠',
                    questions: [
                        {
                            q: 'LoLのせいで学業・仕事のパフォーマンスが下がった',
                            lol: 'あと1戦...が10戦になって寝不足'
                        },
                        {
                            q: 'LoLの時間管理ができず、約束を破ることが多い',
                            lol: '「すぐ終わる」が3時間後'
                        },
                        {
                            q: 'LoLで負けるとイライラして、家族や友人に当たる',
                            lol: 'ソロキューの後は家族に近づくな危険'
                        },
                        {
                            q: 'ゲーム以外のことに集中できない',
                            lol: '仕事中も次のランク戦のことを考えてる'
                        },
                        {
                            q: 'LoLの課金を止められない',
                            lol: 'スキン全部欲しい（財布が空）'
                        },
                        {
                            q: '重要な予定を忘れて、ゲームしてしまう',
                            lol: '友達との約束すっぽかしてランク回してた'
                        }
                    ]
                },
                temporal: {
                    title: '症状の時期',
                    icon: '⏰',
                    questions: [
                        {
                            q: 'LoL以外でも、子供の頃から「落ち着きない」「集中できない」と言われていた',
                            lol: null
                        },
                        {
                            q: 'これらの特性は半年以上続いている',
                            lol: null
                        },
                        {
                            q: 'ゲーム外（学校・職場・家庭）でも同じような問題がある',
                            lol: null
                        },
                        {
                            q: 'これらの問題が日常生活に実際に支障をきたしている',
                            lol: null
                        }
                    ]
                }
            },

            championTypes: {
                hyperInattentive: {
                    name: 'ザ・ドリーマー',
                    title: '夢見る戦略家',
                    emoji: '💭',
                    description: 'あなたは戦場を彷徨う夢想家。壮大な戦略を思い描くが、その実行には課題がある。マップ全体を見ているようで、実は何も見えていない。',
                    passive: '創造的混沌',
                    passiveDesc: '予測不可能な動きで敵を困惑させる。時々自分も困惑する。',
                    q: 'フォーカス・シフト',
                    qDesc: '注意がランダムに移動する。時には有利に、時には...',
                    w: 'マルチタスク・オーバーロード',
                    wDesc: '同時に5つのことを考える。完遂するのは0.5個。',
                    e: 'タイマー・ブラインド',
                    eDesc: 'オブジェクトタイマーを見えなくする（自分に）。',
                    r: 'クリエイティブ・ブースト',
                    rDesc: '独創的な戦術を思いつく。成功率は要検証。'
                },
                hyperImpulsive: {
                    name: 'ザ・バーサーカー',
                    title: '制御不能の戦士',
                    emoji: '⚡',
                    description: 'あなたは戦場の暴走列車。「考えるより先に行動」がモットー。敵を驚かせるが、味方も驚かせる。',
                    passive: 'ノー・ブレーキ',
                    passiveDesc: '常時30%移動速度上昇、撤退不可。',
                    q: 'タワーダイブ・インスティンクト',
                    qDesc: '低HPの敵を見ると理性が吹き飛ぶ。',
                    w: 'フラッシュ・ウェイスト',
                    wDesc: 'フラッシュのCDが1/3になるが、50%は無意味な使い方をする。',
                    e: 'チャット・ウォリアー',
                    eDesc: '煽りに即座に反応。タイピング中は無防備。',
                    r: 'オール・イン・マッドネス',
                    rDesc: '勝率30%以下の戦闘を仕掛ける。たまに勝つ。'
                },
                combined: {
                    name: 'ザ・カオスメーカー',
                    title: '混沌の具現化',
                    emoji: '🌪️',
                    description: 'あなたは予測不可能性の極致。戦略を立てられず、衝動も抑えられない。敵も味方も、そして自分も何が起こるかわからない。',
                    passive: 'ランダム・ファクター',
                    passiveDesc: 'すべての行動に予測不可能性ボーナス。カオス理論の体現者。',
                    q: 'スキャッター・ブレイン',
                    qDesc: '複数の思考が同時発生。実行は運次第。',
                    w: 'インパルス・オーバードライブ',
                    wDesc: '衝動性200%上昇。計画性90%減少。',
                    e: 'アテンション・ワープ',
                    eDesc: '注意が時空を超えて移動する。',
                    r: 'トータル・アナーキー',
                    rDesc: '完全なる混沌を解き放つ。結果は誰にもわからない。'
                },
                mild: {
                    name: 'ザ・ワイルドカード',
                    title: '不安定な天才',
                    emoji: '🎲',
                    description: 'あなたは時々コントロールを失うが、それが強みになることも。予測不可能な動きは敵を翻弄する。',
                    passive: 'アンプレディクタブル',
                    passiveDesc: '時々驚くべきプレイを見せる。再現性は低い。',
                    q: 'モメンタム・シフト',
                    qDesc: '調子が良い時は無双。悪い時は...察して。',
                    w: 'ハイリスク・ハイリターン',
                    wDesc: '危険なプレイを好む。大勝か大敗か。',
                    e: 'ゾーン・エントランス',
                    eDesc: '稀に完璧な集中状態に入る。',
                    r: 'クラッチ・ジーニアス',
                    rDesc: '窮地で才能が開花する。発動条件は謎。'
                },
                normal: {
                    name: 'ザ・バランサー',
                    title: '調和の探求者',
                    emoji: '⚖️',
                    description: 'あなたは比較的安定したプレイヤー。時々ミスもするが、それは人間だから。',
                    passive: 'ステディ・グロース',
                    passiveDesc: '着実に成長し続ける。派手さはないが信頼できる。',
                    q: 'カルム・ディシジョン',
                    qDesc: '冷静な判断を下せる。大体において。',
                    w: 'チーム・シナジー',
                    wDesc: 'チームプレイが得意。コミュニケーションも取れる。',
                    e: 'リスク・アセスメント',
                    eDesc: '危険を適切に評価できる。',
                    r: 'ストラテジック・エクセレンス',
                    rDesc: '戦略的思考に優れる。実行力もある。'
                }
            },

            init() {
                this.render();
            },

            addXP(amount) {
                this.xp += amount;
                if (this.xp >= this.maxXp) {
                    this.level++;
                    this.xp = this.xp - this.maxXp;
                    this.maxXp = Math.floor(this.maxXp * 1.2);
                }
            },

            render() {
                const appDiv = document.getElementById('app');
                appDiv.className = 'fade-in';
                
                if (this.currentSection === 'intro') {
                    appDiv.innerHTML = this.renderIntro();
                } else if (this.currentSection === 'results') {
                    appDiv.innerHTML = this.renderResults();
                } else {
                    appDiv.innerHTML = this.renderSection();
                }

                this.attachEventListeners();
            },

            renderIntro() {
                return `
                    <div class="header">
                        <div class="header-content">
                            <div class="title">ADHD CHAMPION SELECT</div>
                            <div class="subtitle">あなたのプレイスタイル診断</div>
                        </div>
                    </div>

                    <div class="alert alert-danger">
                        <h3>⚠️ 重要な注意事項（真面目な話）</h3>
                        <p style="margin-bottom: 10px;">このツールはLoLプレイヤー向けに作られた<strong>エンターテイメント性の高いスクリーニングツール</strong>です。</p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li style="margin: 5px 0;">• <strong>医学的診断ではありません</strong> - 正式な診断は精神科医・心療内科医のみが行えます</li>
                            <li style="margin: 5px 0;">• ゲーム内での行動は、必ずしもADHDを示すものではありません</li>
                            <li style="margin: 5px 0;">• 真剣に気になる症状がある場合は、専門医に相談してください</li>
                            <li style="margin: 5px 0;">• 自己診断・自己判断での治療開始は危険です</li>
                        </ul>
                    </div>

                    <div class="card">
                        <div class="section-title">
                            <div class="section-icon">🎮</div>
                            サモナー情報
                        </div>

                        <div class="form-group">
                            <label>年齢 *</label>
                            <input type="number" id="age" class="form-control" placeholder="例: 20" min="12" max="100">
                        </div>

                        <div class="form-group">
                            <label>ランク</label>
                            <select id="rank" class="form-control">
                                <option value="">選択してください</option>
                                <option value="iron">Iron</option>
                                <option value="bronze">Bronze</option>
                                <option value="silver">Silver</option>
                                <option value="gold">Gold</option>
                                <option value="platinum">Platinum</option>
                                <option value="emerald">Emerald</option>
                                <option value="diamond">Diamond</option>
                                <option value="master">Master+</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>メインロール</label>
                            <select id="role" class="form-control">
                                <option value="">選択してください</option>
                                <option value="top">Top</option>
                                <option value="jungle">Jungle</option>
                                <option value="mid">Mid</option>
                                <option value="adc">ADC</option>
                                <option value="support">Support</option>
                                <option value="fill">Fill（全部できる）</option>
                            </select>
                        </div>
                    </div>

                    <div class="alert alert-info">
                        <h3>📋 診断内容</h3>
                        <p style="margin-bottom: 10px;">あなたのLoLでのプレイスタイルから、集中力・衝動性・戦略性を分析します。</p>
                        <p style="margin-bottom: 10px;"><strong>全5セクション・約50問</strong>（所要時間: 10-15分）</p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li style="margin: 5px 0;">マップ認識 & フォーカス（9問）</li>
                            <li style="margin: 5px 0;">アグレッシブプレイ & 衝動性（9問）</li>
                            <li style="margin: 5px 0;">戦略 & マクロ管理（10問）</li>
                            <li style="margin: 5px 0;">日常生活への影響（6問）</li>
                            <li style="margin: 5px 0;">症状の時期（4問）</li>
                        </ul>
                        <p style="margin-top: 15px; font-weight: 700;">診断結果: あなた専用の「ADHDチャンピオン」が決定！</p>
                    </div>

                    <div class="alert" style="background: rgba(200, 170, 110, 0.1); border-color: #c8aa6e;">
                        <h3>💡 OGP設定済み</h3>
                        <p style="margin-bottom: 10px; color: #f0e6d2;">
                            このページは既にOGP（SNSカード表示）が設定されています！
                        </p>
                        <ul style="margin-left: 20px; color: #f0e6d2;">
                            <li style="margin: 5px 0;">
                                <strong>ページURL:</strong><br>
                                <code style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; color: #c8aa6e; font-size: 0.85em;">
                                    https://web.syado.net/diagnosis/adhd-lol-champion-select
                                </code>
                            </li>
                            <li style="margin: 5px 0;">
                                <strong>OGP画像URL:</strong><br>
                                <code style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; color: #c8aa6e; font-size: 0.85em;">
                                    https://web.syado.net/diagnosis/adhd-lol-champion-select/og-image.png
                                </code>
                            </li>
                        </ul>
                    </div>

                    <button class="btn btn-primary" style="width: 100%; font-size: 1.3em;" id="startBtn">
                        🎮 チャンピオンセレクト開始
                    </button>
                `;
            },

            renderSection() {
                const sectionKeys = Object.keys(this.sections);
                const currentIndex = sectionKeys.findIndex(key => key === this.currentSection);
                const section = this.sections[this.currentSection];
                
                const totalQuestions = section.questions.length;
                const answeredQuestions = section.questions.filter((_, i) => 
                    this.answers[`${this.currentSection}-${i}`]
                ).length;

                const questionsHTML = section.questions.map((item, i) => {
                    const answer = this.answers[`${this.currentSection}-${i}`];
                    const options = this.currentSection === 'functional' 
                        ? [
                            { value: 'none', label: '影響なし', icon: '😌' },
                            { value: 'mild', label: '軽度', icon: '😐' },
                            { value: 'moderate', label: '中程度', icon: '😰' },
                            { value: 'severe', label: '重度', icon: '😱' }
                        ]
                        : this.currentSection === 'temporal'
                        ? [
                            { value: 'yes', label: 'はい', icon: '✓' },
                            { value: 'no', label: 'いいえ', icon: '✗' },
                            { value: 'unsure', label: 'わからない', icon: '?' }
                        ]
                        : [
                            { value: 'never', label: 'ほぼない', icon: '🟢' },
                            { value: 'sometimes', label: 'ときどき', icon: '🟡' },
                            { value: 'often', label: 'よくある', icon: '🟠' },
                            { value: 'veryOften', label: 'いつも', icon: '🔴' }
                        ];

                    const optionsHTML = options.map(opt => `
                        <div class="option-btn ${answer === opt.value ? 'selected' : ''}" 
                             data-section="${this.currentSection}" 
                             data-index="${i}" 
                             data-value="${opt.value}">
                            <div class="option-icon">${opt.icon}</div>
                            <span>${opt.label}</span>
                        </div>
                    `).join('');

                    return `
                        <div class="question-card">
                            <div class="question-number">Q${i + 1}</div>
                            <div class="question-text">${item.q}</div>
                            ${item.lol ? `<div class="lol-context">💬 ${item.lol}</div>` : ''}
                            <div class="options-grid">
                                ${optionsHTML}
                            </div>
                        </div>
                    `;
                }).join('');

                return `
                    <div class="header">
                        <div class="header-content">
                            <div class="level-display">
                                <div class="level-badge">LEVEL ${this.level}</div>
                            </div>
                            <div class="xp-bar-container">
                                <div class="xp-bar" style="width: ${(this.xp / this.maxXp) * 100}%"></div>
                                <div class="xp-text">${this.xp} / ${this.maxXp} XP</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="section-title">
                            <div class="section-icon">${section.icon}</div>
                            ${section.title}
                        </div>

                        <div style="background: rgba(200, 170, 110, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <div style="color: #c8aa6e; font-weight: 700;">
                                進捗: ${answeredQuestions} / ${totalQuestions} 問完了
                            </div>
                        </div>

                        ${questionsHTML}
                    </div>

                    <div class="btn-container">
                        <button class="btn btn-secondary" id="backBtn">
                            ← 戻る
                        </button>
                        <button class="btn btn-primary" id="nextBtn" ${answeredQuestions < totalQuestions ? 'disabled' : ''}>
                            ${currentIndex === sectionKeys.length - 1 ? '🎯 診断結果を見る' : '次へ →'}
                        </button>
                    </div>
                `;
            },

            renderResults() {
                const scores = this.calculateScores();
                const champion = this.determineChampion(scores);

                return `
                    <div class="header">
                        <div class="header-content">
                            <div class="title">診断完了！</div>
                            <div class="subtitle">あなたのチャンピオンが決定しました</div>
                        </div>
                    </div>

                    <div class="card champion-result">
                        <div class="champion-portrait">${champion.emoji}</div>
                        <div class="champion-name">${champion.name}</div>
                        <div class="champion-title">『${champion.title}』</div>
                        <p style="font-size: 1.1em; color: #a09b8c; line-height: 1.8; max-width: 600px; margin: 0 auto;">
                            ${champion.description}
                        </p>
                    </div>

                    <div class="card">
                        <div class="section-title">
                            <div class="section-icon">📊</div>
                            ステータス
                        </div>

                        <div class="stats-grid">
                            <div class="stat-box">
                                <div class="stat-label">不注意症状</div>
                                <div class="stat-value">${scores.inattention}/9</div>
                                <div class="stat-bar">
                                    <div class="stat-fill" style="width: ${(scores.inattention / 9) * 100}%"></div>
                                </div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">衝動性</div>
                                <div class="stat-value">${scores.hyperactivity}/9</div>
                                <div class="stat-bar">
                                    <div class="stat-fill" style="width: ${(scores.hyperactivity / 9) * 100}%"></div>
                                </div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">戦略性の課題</div>
                                <div class="stat-value">${scores.additional}/10</div>
                                <div class="stat-bar">
                                    <div class="stat-fill" style="width: ${(scores.additional / 10) * 100}%"></div>
                                </div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-label">日常への影響</div>
                                <div class="stat-value">${scores.functional}/6</div>
                                <div class="stat-bar">
                                    <div class="stat-fill" style="width: ${(scores.functional / 6) * 100}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="abilities-section">
                        <div class="section-title" style="justify-content: center;">
                            <div class="section-icon">✨</div>
                            チャンピオンアビリティ
                        </div>

                        <div class="ability">
                            <div class="ability-icon">P</div>
                            <div class="ability-content">
                                <h4>${champion.passive}</h4>
                                <div class="ability-desc">${champion.passiveDesc}</div>
                            </div>
                        </div>

                        <div class="ability">
                            <div class="ability-icon">Q</div>
                            <div class="ability-content">
                                <h4>${champion.q}</h4>
                                <div class="ability-desc">${champion.qDesc}</div>
                            </div>
                        </div>

                        <div class="ability">
                            <div class="ability-icon">W</div>
                            <div class="ability-content">
                                <h4>${champion.w}</h4>
                                <div class="ability-desc">${champion.wDesc}</div>
                            </div>
                        </div>

                        <div class="ability">
                            <div class="ability-icon">E</div>
                            <div class="ability-content">
                                <h4>${champion.e}</h4>
                                <div class="ability-desc">${champion.eDesc}</div>
                            </div>
                        </div>

                        <div class="ability">
                            <div class="ability-icon">R</div>
                            <div class="ability-content">
                                <h4>${champion.r}</h4>
                                <div class="ability-desc">${champion.rDesc}</div>
                            </div>
                        </div>
                    </div>

                    ${this.renderRecommendations(scores)}

                    <div class="alert alert-danger">
                        <h3>⚠️ 真面目な話（もう一度）</h3>
                        <p style="margin-bottom: 10px;">このツールはエンターテイメント目的で、LoLプレイヤー向けに作られています。</p>
                        <ul style="margin-left: 20px;">
                            <li style="margin: 5px 0;">• これは医学的診断ではありません</li>
                            <li style="margin: 5px 0;">• 本当に困っている場合は、精神科医・心療内科医に相談してください</li>
                            <li style="margin: 5px 0;">• ADHDは適切な治療で大きく改善できます</li>
                            <li style="margin: 5px 0;">• 自己判断での薬の使用は危険です</li>
                        </ul>
                    </div>

                    <div class="alert alert-info">
                        <h3>✅ OGP設定完了！</h3>
                        <p style="margin-bottom: 10px;">
                            このページは既にOGP（SNSカード表示）が設定されています。画像をアップロードすれば、SNSでカード表示されます！
                        </p>
                        <ol style="margin-left: 20px;">
                            <li style="margin: 8px 0;">
                                <strong>下の「OGP画像を生成」ボタンをクリック</strong>
                            </li>
                            <li style="margin: 8px 0;">
                                <strong>og-image.png をダウンロード</strong>
                            </li>
                            <li style="margin: 8px 0;">
                                <strong>サーバーにアップロード:</strong><br>
                                <code style="background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px;">
                                    https://web.syado.net/diagnosis/adhd-lol-champion-select/og-image.png
                                </code>
                            </li>
                            <li style="margin: 8px 0;">
                                <strong>確認:</strong><br>
                                <a href="https://cards-dev.twitter.com/validator" target="_blank" style="color: #c8aa6e; text-decoration: underline;">Twitter Card Validator</a> でテスト
                            </li>
                        </ol>
                        <button class="btn btn-primary" id="generateOGImageBtn" style="margin-top: 15px; width: 100%;">
                            🖼️ OGP画像を生成（1200x630px）
                        </button>
                    </div>

                    <div class="card" style="background: rgba(200, 170, 110, 0.1);">
                        <div class="section-title">
                            <div class="section-icon">📤</div>
                            結果をシェアする
                        </div>
                        
                        <div class="share-buttons" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <button class="btn btn-primary" id="shareTwitterImageBtn" style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                                <span style="font-size: 1.3em;">𝕏</span>
                                画像付きでシェア
                            </button>
                            <button class="btn btn-secondary" id="shareTwitterBtn" style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                                <span style="font-size: 1.3em;">𝕏</span>
                                テキストのみ
                            </button>
                            <button class="btn btn-secondary" id="copyTextBtn" style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                                📋
                                テキストコピー
                            </button>
                            <button class="btn btn-secondary" id="saveImageBtn" style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                                🖼️
                                画像保存
                            </button>
                        </div>

                        <div id="shareMessage" style="margin-top: 15px; padding: 15px; border-radius: 8px; display: none;"></div>
                    </div>

                    <div class="btn-container">
                        <button class="btn btn-primary" id="restartBtn" style="width: 100%;">
                            🔄 もう一度診断する
                        </button>
                    </div>
                `;
            },

            renderRecommendations(scores) {
                const severity = this.getSeverity(scores);

                if (severity === 'high') {
                    return `
                        <div class="alert alert-warning">
                            <h3>⚠️ 推奨事項</h3>
                            <p style="margin-bottom: 15px;">
                                スコアが高めです。もしゲーム外でも同様の困難を感じている場合は、
                                専門医（精神科・心療内科）への相談を検討してください。
                            </p>
                        </div>

                        <div class="tips-section">
                            <h3>🎯 プレイ改善のヒント</h3>
                            <div class="tip-item">
                                <div>💡</div>
                                <div>
                                    <strong>ミニマップにタイマーを設定</strong><br>
                                    5秒ごとにミニマップを見る習慣をつけよう
                                </div>
                            </div>
                            <div class="tip-item">
                                <div>💡</div>
                                <div>
                                    <strong>チェックリストを作る</strong><br>
                                    ゲーム開始前に「今回意識すること」を3つ決めよう
                                </div>
                            </div>
                            <div class="tip-item">
                                <div>💡</div>
                                <div>
                                    <strong>休憩を取る</strong><br>
                                    2ゲームに1回は休憩。集中力がリセットされる
                                </div>
                            </div>
                        </div>
                    `;
                } else if (severity === 'medium') {
                    return `
                        <div class="tips-section">
                            <h3>🎯 プレイ改善のヒント</h3>
                            <div class="tip-item">
                                <div>💡</div>
                                <div>
                                    <strong>得意なチャンピオンを絞る</strong><br>
                                    3-5体に絞ると、マクロに集中できる
                                </div>
                            </div>
                            <div class="tip-item">
                                <div>💡</div>
                                <div>
                                    <strong>リプレイを見る</strong><br>
                                    自分のミスパターンを分析しよう
                                </div>
                            </div>
                            <div class="tip-item">
                                <div>💡</div>
                                <div>
                                    <strong>プレイ時間を管理</strong><br>
                                    連続プレイは判断力を低下させる
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    return `
                        <div class="tips-section">
                            <h3>✨ あなたの強み</h3>
                            <div class="tip-item">
                                <div>⭐</div>
                                <div>
                                    比較的安定したプレイスタイル。この調子で成長を続けよう！
                                </div>
                            </div>
                        </div>
                    `;
                }
            },

            calculateScores() {
                let inattention = 0, hyperactivity = 0, additional = 0, functional = 0, temporal = 0;

                // Inattention
                for (let i = 0; i < 9; i++) {
                    const ans = this.answers[`inattention-${i}`];
                    if (ans === 'often' || ans === 'veryOften') inattention++;
                }

                // Hyperactivity
                for (let i = 0; i < 9; i++) {
                    const ans = this.answers[`hyperactivity-${i}`];
                    if (ans === 'often' || ans === 'veryOften') hyperactivity++;
                }

                // Additional
                for (let i = 0; i < 10; i++) {
                    const ans = this.answers[`additional-${i}`];
                    if (ans === 'often' || ans === 'veryOften') additional++;
                }

                // Functional
                for (let i = 0; i < 6; i++) {
                    const ans = this.answers[`functional-${i}`];
                    if (ans === 'moderate' || ans === 'severe') functional++;
                }

                // Temporal
                for (let i = 0; i < 4; i++) {
                    const ans = this.answers[`temporal-${i}`];
                    if (ans === 'yes') temporal++;
                }

                return { inattention, hyperactivity, additional, functional, temporal };
            },

            determineChampion(scores) {
                const inattentionHigh = scores.inattention >= 5;
                const hyperactivityHigh = scores.hyperactivity >= 5;

                if (inattentionHigh && hyperactivityHigh) {
                    return this.championTypes.combined;
                } else if (inattentionHigh) {
                    return this.championTypes.hyperInattentive;
                } else if (hyperactivityHigh) {
                    return this.championTypes.hyperImpulsive;
                } else if (scores.inattention + scores.hyperactivity >= 8) {
                    return this.championTypes.mild;
                } else {
                    return this.championTypes.normal;
                }
            },

            getSeverity(scores) {
                if ((scores.inattention >= 5 || scores.hyperactivity >= 5) && scores.functional >= 2) {
                    return 'high';
                } else if (scores.inattention + scores.hyperactivity >= 8) {
                    return 'medium';
                } else {
                    return 'low';
                }
            },

            attachEventListeners() {
                const startBtn = document.getElementById('startBtn');
                if (startBtn) {
                    const ageInput = document.getElementById('age');
                    ageInput?.addEventListener('input', () => {
                        startBtn.disabled = !ageInput.value || ageInput.value < 12;
                    });

                    startBtn.addEventListener('click', () => {
                        this.currentSection = 'inattention';
                        this.addXP(10);
                        this.render();
                        window.scrollTo(0, 0);
                    });
                }

                const optionBtns = document.querySelectorAll('.option-btn');
                optionBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        const section = btn.dataset.section;
                        const index = btn.dataset.index;
                        const value = btn.dataset.value;
                        const key = `${section}-${index}`;
                        
                        if (!this.answers[key]) {
                            this.addXP(5);
                        }
                        
                        this.answers[key] = value;
                        this.render();
                    });
                });

                const backBtn = document.getElementById('backBtn');
                if (backBtn) {
                    backBtn.addEventListener('click', () => {
                        const sections = ['inattention', 'hyperactivity', 'additional', 'functional', 'temporal'];
                        const currentIndex = sections.indexOf(this.currentSection);
                        this.currentSection = currentIndex === 0 ? 'intro' : sections[currentIndex - 1];
                        this.render();
                        window.scrollTo(0, 0);
                    });
                }

                const nextBtn = document.getElementById('nextBtn');
                if (nextBtn && !nextBtn.disabled) {
                    nextBtn.addEventListener('click', () => {
                        const sections = ['inattention', 'hyperactivity', 'additional', 'functional', 'temporal'];
                        const currentIndex = sections.indexOf(this.currentSection);
                        
                        if (currentIndex === sections.length - 1) {
                            this.currentSection = 'results';
                            this.addXP(50);
                        } else {
                            this.currentSection = sections[currentIndex + 1];
                            this.addXP(10);
                        }
                        
                        this.render();
                        window.scrollTo(0, 0);
                    });
                }

                const restartBtn = document.getElementById('restartBtn');
                if (restartBtn) {
                    restartBtn.addEventListener('click', () => {
                        this.currentSection = 'intro';
                        this.answers = {};
                        this.level = 1;
                        this.xp = 0;
                        this.maxXp = 100;
                        this.render();
                        window.scrollTo(0, 0);
                    });
                }

                // Share buttons
                const shareTwitterImageBtn = document.getElementById('shareTwitterImageBtn');
                if (shareTwitterImageBtn) {
                    shareTwitterImageBtn.addEventListener('click', () => {
                        this.shareToTwitterWithImage();
                    });
                }

                const shareTwitterBtn = document.getElementById('shareTwitterBtn');
                if (shareTwitterBtn) {
                    shareTwitterBtn.addEventListener('click', () => {
                        this.shareToTwitter();
                    });
                }

                const copyTextBtn = document.getElementById('copyTextBtn');
                if (copyTextBtn) {
                    copyTextBtn.addEventListener('click', () => {
                        this.copyResultText();
                    });
                }

                const saveImageBtn = document.getElementById('saveImageBtn');
                if (saveImageBtn) {
                    saveImageBtn.addEventListener('click', () => {
                        this.saveResultImage();
                    });
                }

                const generateOGImageBtn = document.getElementById('generateOGImageBtn');
                if (generateOGImageBtn) {
                    generateOGImageBtn.addEventListener('click', () => {
                        this.generateOGImage();
                    });
                }
            },

            shareToTwitterWithImage() {
                const scores = this.calculateScores();
                const champion = this.determineChampion(scores);
                
                // まず画像を生成してダウンロード
                this.generateAndDownloadImage(champion, scores, () => {
                    // 画像ダウンロード後、案内メッセージを表示
                    this.showShareMessage('📥 画像をダウンロードしました！\n⏳ 3秒後にツイート画面を開きます...', 'success');
                    
                    // 3秒待ってからツイート画面を開く
                    setTimeout(() => {
                        const text = `【ADHD Champion Select】\n私のチャンピオンは「${champion.name}」${champion.emoji}\n『${champion.title}』\n\n不注意: ${scores.inattention}/9\n衝動性: ${scores.hyperactivity}/9\n\n↓ダウンロードした画像を添付してツイート！`;
                        
                        const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
                        window.open(twitterUrl, '_blank');
                        
                        this.showShareMessage('✅ ダウンロードした画像をツイートに添付してください！', 'success');
                    }, 3000);
                });
            },

            shareToTwitter() {
                const scores = this.calculateScores();
                const champion = this.determineChampion(scores);
                
                const text = `【ADHD Champion Select】\n私のチャンピオンは「${champion.name}」${champion.emoji}\n『${champion.title}』\n\n不注意: ${scores.inattention}/9\n衝動性: ${scores.hyperactivity}/9\n\nあなたも診断してみよう！`;
                
                const url = 'https://web.syado.net/diagnosis/adhd-lol-champion-select';
                const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
                
                window.open(twitterUrl, '_blank');
            },

            copyResultText() {
                const scores = this.calculateScores();
                const champion = this.determineChampion(scores);
                
                const text = `━━━━━━━━━━━━━━━━━━
🎮 ADHD Champion Select
━━━━━━━━━━━━━━━━━━

あなたのチャンピオン: ${champion.name} ${champion.emoji}
称号: ${champion.title}

${champion.description}

━━━━━━━━━━━━━━━━━━
📊 ステータス
━━━━━━━━━━━━━━━━━━
不注意症状:      ${scores.inattention}/9 ${'█'.repeat(scores.inattention)}${'░'.repeat(9-scores.inattention)}
衝動性:          ${scores.hyperactivity}/9 ${'█'.repeat(scores.hyperactivity)}${'░'.repeat(9-scores.hyperactivity)}
戦略性の課題:    ${scores.additional}/10 ${'█'.repeat(scores.additional)}${'░'.repeat(10-scores.additional)}
日常への影響:    ${scores.functional}/6 ${'█'.repeat(scores.functional)}${'░'.repeat(6-scores.functional)}

━━━━━━━━━━━━━━━━━━
✨ アビリティ
━━━━━━━━━━━━━━━━━━
[P] ${champion.passive}
${champion.passiveDesc}

[Q] ${champion.q}
${champion.qDesc}

[W] ${champion.w}
${champion.wDesc}

[E] ${champion.e}
${champion.eDesc}

[R] ${champion.r}
${champion.rDesc}

━━━━━━━━━━━━━━━━━━`;

                navigator.clipboard.writeText(text).then(() => {
                    this.showShareMessage('✅ テキストをクリップボードにコピーしました！', 'success');
                }).catch(() => {
                    this.showShareMessage('❌ コピーに失敗しました', 'error');
                });
            },

            saveResultImage() {
                const scores = this.calculateScores();
                const champion = this.determineChampion(scores);
                
                this.generateAndDownloadImage(champion, scores, () => {
                    this.showShareMessage('✅ 画像を保存しました！', 'success');
                });
            },

            generateAndDownloadImage(champion, scores, callback) {

                const canvas = document.createElement('canvas');
                canvas.width = 1200;
                canvas.height = 1400;
                const ctx = canvas.getContext('2d');

                // Background gradient
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#0a1428');
                gradient.addColorStop(0.5, '#1e2328');
                gradient.addColorStop(1, '#0a1428');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Stars
                ctx.fillStyle = '#c8aa6e';
                for (let i = 0; i < 50; i++) {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height;
                    const size = Math.random() * 2 + 1;
                    ctx.beginPath();
                    ctx.arc(x, y, size, 0, Math.PI * 2);
                    ctx.fill();
                }

                // Border
                ctx.strokeStyle = '#c8aa6e';
                ctx.lineWidth = 4;
                ctx.strokeRect(20, 20, canvas.width - 40, canvas.height - 40);

                // Title
                ctx.fillStyle = '#c8aa6e';
                ctx.font = 'bold 60px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('ADHD CHAMPION SELECT', canvas.width / 2, 100);

                // Champion emoji (large)
                ctx.font = '200px Arial';
                ctx.fillText(champion.emoji, canvas.width / 2, 320);

                // Champion name
                ctx.font = 'bold 70px Arial';
                ctx.fillStyle = '#c8aa6e';
                ctx.fillText(champion.name, canvas.width / 2, 430);

                // Champion title
                ctx.font = 'italic 40px Arial';
                ctx.fillStyle = '#a09b8c';
                ctx.fillText(`『${champion.title}』`, canvas.width / 2, 490);

                // Description (word wrap)
                ctx.font = '28px Arial';
                ctx.fillStyle = '#f0e6d2';
                const words = champion.description.split('');
                let line = '';
                let y = 560;
                const maxWidth = 1000;
                
                for (let i = 0; i < words.length; i++) {
                    const testLine = line + words[i];
                    const metrics = ctx.measureText(testLine);
                    if (metrics.width > maxWidth && i > 0) {
                        ctx.fillText(line, canvas.width / 2, y);
                        line = words[i];
                        y += 40;
                    } else {
                        line = testLine;
                    }
                }
                ctx.fillText(line, canvas.width / 2, y);

                // Stats section
                y += 80;
                ctx.fillStyle = '#c8aa6e';
                ctx.font = 'bold 40px Arial';
                ctx.fillText('━━━━ ステータス ━━━━', canvas.width / 2, y);

                // Draw stats
                const stats = [
                    { label: '不注意症状', value: scores.inattention, max: 9 },
                    { label: '衝動性', value: scores.hyperactivity, max: 9 },
                    { label: '戦略性の課題', value: scores.additional, max: 10 },
                    { label: '日常への影響', value: scores.functional, max: 6 }
                ];

                y += 60;
                ctx.font = '32px Arial';
                ctx.textAlign = 'left';

                stats.forEach(stat => {
                    // Label
                    ctx.fillStyle = '#f0e6d2';
                    ctx.fillText(stat.label, 150, y);

                    // Value
                    ctx.textAlign = 'right';
                    ctx.fillStyle = '#c8aa6e';
                    ctx.fillText(`${stat.value}/${stat.max}`, 1050, y);

                    // Bar background
                    ctx.fillStyle = '#0a1428';
                    ctx.fillRect(150, y + 10, 900, 20);

                    // Bar fill
                    const barWidth = (stat.value / stat.max) * 900;
                    const barGradient = ctx.createLinearGradient(150, 0, 150 + barWidth, 0);
                    barGradient.addColorStop(0, '#785a28');
                    barGradient.addColorStop(1, '#c8aa6e');
                    ctx.fillStyle = barGradient;
                    ctx.fillRect(150, y + 10, barWidth, 20);

                    ctx.textAlign = 'left';
                    y += 70;
                });

                // Footer
                y = canvas.height - 80;
                ctx.textAlign = 'center';
                ctx.font = 'bold 28px Arial';
                ctx.fillStyle = '#785a28';
                ctx.fillText('あなたも診断してみよう！', canvas.width / 2, y);

                // Convert to blob and download
                canvas.toBlob((blob) => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `adhd-champion-${champion.name.replace(/\s/g, '-')}.png`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    if (callback) {
                        callback();
                    }
                });
            },

            showShareMessage(message, type) {
                const messageDiv = document.getElementById('shareMessage');
                if (messageDiv) {
                    messageDiv.innerHTML = message.replace(/\n/g, '<br>');
                    messageDiv.style.display = 'block';
                    messageDiv.style.background = type === 'success' 
                        ? 'rgba(76, 175, 80, 0.2)' 
                        : 'rgba(244, 67, 54, 0.2)';
                    messageDiv.style.border = type === 'success'
                        ? '2px solid #4CAF50'
                        : '2px solid #f44336';
                    messageDiv.style.color = type === 'success' ? '#4CAF50' : '#f44336';

                    setTimeout(() => {
                        messageDiv.style.display = 'none';
                    }, 5000);
                }
            },

            generateOGImage() {
                const canvas = document.createElement('canvas');
                canvas.width = 1200;
                canvas.height = 630;
                const ctx = canvas.getContext('2d');

                // Background gradient
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#0a1428');
                gradient.addColorStop(0.5, '#1e2328');
                gradient.addColorStop(1, '#0a1428');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Stars
                ctx.fillStyle = '#c8aa6e';
                for (let i = 0; i < 80; i++) {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height;
                    const size = Math.random() * 2 + 1;
                    ctx.beginPath();
                    ctx.arc(x, y, size, 0, Math.PI * 2);
                    ctx.fill();
                }

                // Border
                ctx.strokeStyle = '#c8aa6e';
                ctx.lineWidth = 6;
                ctx.strokeRect(20, 20, canvas.width - 40, canvas.height - 40);

                // Title
                ctx.fillStyle = '#c8aa6e';
                ctx.font = 'bold 80px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('ADHD CHAMPION SELECT', canvas.width / 2, 140);

                // Icon/Emoji
                ctx.font = '200px Arial';
                ctx.fillText('🎮', canvas.width / 2, 350);

                // Subtitle
                ctx.font = 'bold 50px Arial';
                ctx.fillStyle = '#a09b8c';
                ctx.fillText('あなたのプレイスタイル診断', canvas.width / 2, 450);

                // Description
                ctx.font = '35px Arial';
                ctx.fillStyle = '#f0e6d2';
                ctx.fillText('LoLプレイヤー向けADHDスクリーニングツール', canvas.width / 2, 520);

                // Footer
                ctx.font = 'bold 30px Arial';
                ctx.fillStyle = '#785a28';
                ctx.fillText('診断してあなたのチャンピオンを見つけよう！', canvas.width / 2, 580);

                // Convert to blob and download
                canvas.toBlob((blob) => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'og-image.png';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    this.showShareMessage('✅ OGP画像（og-image.png）を保存しました！\nこの画像をサーバーにアップロードして、HTMLのog:imageタグのURLを更新してください。', 'success');
                });
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });
    </script>
</body>
</html>